var A=a=>typeof a=='string',{defineProperty:b}=Object,c='<span class="odometer-value"></span>',d=`<span class="odometer-ribbon"><span class="odometer-ribbon-inner">${c}</span></span>`,e=`<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">${d}</span></span>`,f='<span class="odometer-formatting-mark"></span>',g='(,ddd).dd',h=0,_=/^\(?([^)]*)\)?(?:(.)(D*)(d*))?$/,B=30,K=2000,l=20,m=2,n=0.5,o=1000/B,p=1000/l,q='transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd',r=C=>{const _b=document.createElement('div');_b.innerHTML=C;return _b.children[0]},s=(_a,...D)=>_a.classList.remove(...D),t=(_A,..._B)=>{s(_A,..._B);return _A.classList.add(..._B)},u=(E,aA)=>E.dispatchEvent(new CustomEvent(aA, {bubbles:!0,cancelable:!0})),V=()=>window.performance.now(),w=(aB,aC=0)=>{if(!aC)return Math.round(aB);aB*=Math.pow(10,aC);aB+=0.5;aB=~~aB;return aB/Math.pow(10,aC)},x=aD=>{if(aD<0)return Math.ceil(aD);return ~~aD};class Odometer{constructor(aE){this.options=aE;this.el=this.options.el;if(this.el.odometer)return this.el.odometer;this.el.odometer=this;for(let k in Odometer.options){var v=Odometer.options[k];this.options[k]==null&&(this.options[k]=v)}this.options.duration==null&&(this.options.duration=K);this.MAX_VALUES=(this.options.duration/o/m)|0;this.resetFormat();this.value=this.cleanValue(this.options.value!=null?this.options.value:'');this.renderInside();this.render();try {for(let aF of ['innerHTML','innerText','textContent'])if(this.el[aF]!=null){;(aG=>b(this.el,aG,{get:()=>{if(aG=='innerHTML')return this.inside.outerHTML;return this.inside.innerText!=null?this.inside.innerText:this.inside.textContent},set:aH=>this.update(aH)}))(aF)}} catch {this.watchForMutations()}}static init(){var aI=document.querySelectorAll(Odometer.options.selector||'.odometer');return [...aI].map(aJ=>(aJ.odometer=new Odometer({el:aJ,value:aJ.innerText!=null?aJ.innerText:aJ.textContent})))}renderInside(){this.inside=document.createElement('div');this.inside.className='odometer-inside';this.el.innerHTML='';return this.el.appendChild(this.inside)}watchForMutations(){try {!this.observer&&(this.observer=new MutationObserver(()=>{this.renderInside();this.render(this.value);return this.update(this.el.innerText)}));this.watchMutations=!0;return this.startWatchingMutations()} catch {}}startWatchingMutations(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})}stopWatchingMutations(){return this.observer?.disconnect()}cleanValue(aK){A(aK)&&(aK=aK.replace(this.format.radix||'.','<radix>'),aK=aK.replace(/[.]/g,''),aK=aK.replace('<radix>','.'),aK=parseFloat(aK,10)||0);return w(aK,this.format.precision)}bindTransitionEnd(){if(this.transitionEndBound)return;this.transitionEndBound=!0;let aL=!1;return q.split(' ').map(aM=>this.el.addEventListener(aM,()=>{if(aL)return!0;aL=!0;setTimeout(()=>{this.render();aL=!1;return u(this.el,'odometerdone')},0);return!0}))}resetFormat(){let aN=this.options.format||g;!aN&&(aN='d');var aO=_.exec(aN),[_c,_d,_e,F]=aO.slice(1,5),H=G+(F?F.length:0);if(!aO)throw Error('Odometer: Unparsable digit format');let G=_e?_e.length:0;return (this.format={repeating:_c,radix:_d,precision:H,fractional:G})}render(aP=this.value){this.stopWatchingMutations();this.resetFormat();this.inside.innerHTML='';let{theme:aQ}=this.options;var _C=[];for(let aR of this.el.classList)if(aR.length){var _D;if((_D=/^odometer-theme-(.+)$/.exec(aR))){aQ=_D[1];continue}if(/^odometer(-|$)/.test(aR))continue;_C.push(aR)}_C.push('odometer');aQ?_C.push(`odometer-theme-${aQ}`):_C.push('odometer-auto-theme');this.el.className=_C.join(' ');this.ribbons={};this.formatDigits(aP);return this.startWatchingMutations()}formatDigits(aS){let aT;this.digits=[];if(this.options.formatFunction){var aU=this.options.formatFunction(aS);for(let aV of aU.split('').reverse())aV.match(/\d/)?(aT=this.renderDigit(),aT.querySelector('.odometer-value').innerHTML=aV,this.digits.push(aT),this.insertDigit(aT)):(this.addSpacer(aV))}else{let v=Math.abs(aS);let aW=Math.max(this.format.fractional,this.getFractionalDigitCount(v));aW&&(v=Math.round(v*Math.pow(10,aW)));let i=0;while (v>0) {this.addDigit(`${(v%10)}`,i>=aW);v=~~v/10;i++;i==aW&&this.addDigit('.',!0)}let aX=this.options.minIntegerLength||h;let _E=i-aW;while (_E++<aX)this.addDigit(0,!0);aS<0&&this.addDigit('-',!0)}}update(aY){let aZ=aY-this.value;aY=this.cleanValue(aY);if(!aZ)return;s(this.el,'odometer-animating-up','odometer-animating-down','odometer-animating');aZ>0?t(this.el,'odometer-animating-up'):t(this.el,'odometer-animating-down');this.stopWatchingMutations();this.animate(aY);this.startWatchingMutations();setTimeout(()=>t(this.el,'odometer-animating'),0);return (this.value=aY)}renderDigit(){return r(e)}insertDigit(bA,bB){if(bB!=null)return this.inside.insertBefore(bA,bB);if(!this.inside.children.length)return this.inside.appendChild(bA);return this.inside.insertBefore(bA,this.inside.children[0])}addSpacer(bC,bD,...bE){var bF=r(f);bF.innerHTML=bC;bE&&t(bF,...bE);return this.insertDigit(bF,bD)}addDigit(bG,bH=!0){if(bG=='-')return this.addSpacer(bG,null,'odometer-negation-mark');if(bG=='.')return this.addSpacer(this.format.radix||'.',null,'odometer-radix-mark');if(bH){let bK=!1;while (!0) {if(!this.format.repeating.length){if(bK)throw Error('Bad odometer format without digits');this.resetFormat();bK=!0}var bI=this.format.repeating[this.format.repeating.length-1];this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1);if(bI=='d')break;this.addSpacer(bI)}}var bJ=this.renderDigit();bJ.querySelector('.odometer-value').innerHTML=bG;this.digits.push(bJ);return this.insertDigit(bJ)}animate(bL){if(this.options.animation=='count')return this.animateCount(bL);return this.animateSlide(bL)}animateCount(bM){let bN=+bM-this.value,bO=V(),bP;if(!bN)return;var bQ=bO;let _f=this.value;return (bP=()=>{if(this.options.duration<V()-bQ){this.value=bM;this.render();return u(this.el,'odometerdone')}var bR=V()-bO;if(bR>p){bO=V();var bS=bR/this.options.duration;_f+=bN*bS;this.render(Math.round(_f))}return requestAnimationFrame(bP)})()}getDigitCount(...bT){for(const[i,bV] of bT.entries())bT[i]=Math.abs(bV);var bU=Math.max(...bT);return Math.ceil(Math.log(bU+1)/Math.log(10))}getFractionalDigitCount(...bW){var bX=/^\-?\d*\.(\d*?)0*$/;for(const[i,bZ] of bW.entries()){bW[i]=`${bZ}`;var bY=bX.exec(bW[i]);!bY?bW[i]=0:bW[i]=bY[1].length}return Math.max(...bW)}resetDigits(){this.digits=[];this.ribbons=[];this.inside.innerHTML='';return this.resetFormat()}animateSlide(cA){let cB,cC,cD,i,_F;let _g,_h,k;let J=this.value;var _k=Math.max(this.format.fractional,this.getFractionalDigitCount(J,cA)),M=Math.max(this.getDigitCount(J,cA),L+_k),N=[],S=N.reverse(),U=this.inside.querySelector('.odometer-radix-mark');_k&&(cA=Math.round(cA*Math.pow(10,_k)),J=Math.round(J*Math.pow(10,_k)));if(!(cB=cA-J))return;this.bindTransitionEnd();let L=this.options.minIntegerLength||h;let O=0;for((k=0,i=k,_h=M,_g=_h>=0);_g?k<_h:k>_h;(_g?k++:k--,i=k)){_F=x(J/Math.pow(10,M-i-1));var P=x(cA/Math.pow(10,M-i-1)),Q=P-_F;if(Math.abs(Q)>this.MAX_VALUES){cD=[];var R=Q/(this.MAX_VALUES+this.MAX_VALUES*O*n);let cE=_F;while ((Q>0&&cE<P)||(Q<0&&cE>P)) {cD.push(Math.round(cE));cE+=R}cD[cD.length-1]!==P&&cD.push(P);O++}else cD=z(_F,P,!0);for(i=0;i<cD.length;i++){cC=cD[i];cD[i]=Math.abs(cC%10)}N.push(cD)}this.resetDigits();for(i=0;i<S.length;i++){cD=S[i];!this.digits[i]&&this.addDigit(' ',i>=_k);this.ribbons[i]==null&&(this.ribbons[i]=this.digits[i].querySelector('.odometer-ribbon-inner'));this.ribbons[i].innerHTML='';cB<0&&(cD=cD.reverse());for(let j=0;j<cD.length;j++){cC=cD[j];var T=document.createElement('div');T.className='odometer-value';T.innerHTML=cC;this.ribbons[i].appendChild(T);j==cD.length-1&&t(T,'odometer-last-value');!j&&t(T,'odometer-first-value')}}_F<0&&this.addDigit('-');U&&U.parent.removeChild(U);if(_k)return this.addSpacer(this.format.radix,this.digits[_k-1],'odometer-radix-mark')}}Odometer.options=window.odometerOptions||{};document.addEventListener('DOMContentLoaded',()=>{if(Odometer.options.auto!==!1)return Odometer.init()});typeof define=='function'&&define.amd?define([],()=>Odometer):typeof exports!=='undefined'&&exports!=null?module.exports=Odometer:window.Odometer=Odometer;function z(cF,cG,cH){let cI=[];let cJ=cF<cG?1:-1;let cK=!cH?cG:cG+cJ;while (cF!==cK) {cI.push(cF);cF+=cJ}return cI}
